package dfatoolkit

// RPNIFromDataset returns a DFA and search data generated by the regular
// positive and negative inference (RPNI) algorithm. It takes a dataset as
// a parameter which is used to generate an APTA while passing it to the RPNI function.
func RPNIFromDataset(dataset Dataset) (DFA, SearchData) {
	// Construct an APTA from the dataset.
	APTA := dataset.GetPTA(true)

	// Call RPNI function using APTA gathered above.
	// Return resultant DFA and search data.
	return RPNI(APTA)
}

// RPNI returns a DFA and search data generated by the regular
// positive and negative inference (RPNI) algorithm. It takes an
// APTA as a parameter which is passed to the GreedySearch function.
func RPNI(APTA DFA) (DFA, SearchData) {
	// Convert APTA to StatePartition for state merging.
	statePartition := APTA.ToStatePartition()

	// Call GreedySearch function using state partition and rejecting
	// string examples declared above. This function returns the resultant
	// state partition and the search data.
	statePartition, searchData := GreedySearch(statePartition)

	// Convert the state partition to a DFA.
	resultantDFA := statePartition.ToQuotientDFA()

	// Check if DFA generated is valid.
	resultantDFA.IsValidPanic()

	// Return resultant DFA and search data.
	return resultantDFA, searchData
}
